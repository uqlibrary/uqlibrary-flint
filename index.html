<!doctype html>
<html>
<head>
  <title>Queensland Speech Survey</title>

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" user-scalable="no">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <link rel="icon" type="image/x-icon" href="resources/images/favicon.ico">
  <script src="../webcomponentsjs/webcomponents.js"></script>
    <link rel="import" href="../uqlibrary-elements/0.5.4/lib/vulcanized.html">
  <!--<link href="resources/theme/styles.css" rel="stylesheet">-->
    <link rel="stylesheet" href="../uqlibrary-elements/resources/theme/element.css">
</head>

<body fullbleed unresolved>

<core-drawer-panel responsiveWidth="1500px">
    <div drawer class="left-drawer">
        <core-toolbar>
            <div vertical layout>
                <div horizontal layout>
                    <div>
                        <a href="http://www.uq.edu.au" class="uq-link"><img src="https://app.library.uq.edu.au/images/uq_theme/uq.png" id="mini-logo"></a>
                        <a href="http://www.uq.edu.au"><img src="https://www.library.uq.edu.au/360Link/Current/uq-logo.svg" id="main-logo"></a>
                        <a class="uq-library-header-logo" href="https://www.library.uq.edu.au">Library</a>
                        <a class="uq-library-header-logo-mini" href="https://www.library.uq.edu.au">UQ Library</a>
                    </div>
                </div>
                <div flex></div>
            </div>
        </core-toolbar>

        <core-menu selectedAttribute="">
            <paper-item on-tap="{{togglePage}}">
                <core-icon icon="home"></core-icon>UQ Library</paper-item>
            <paper-item>
                <core-icon icon="info"></core-icon>About</paper-item>
            <hr>
            <paper-item>
                <core-icon icon="help"></core-icon>Help &amp; Feedback</paper-item>
        </core-menu>

    </div>

    <core-drawer-panel main rightDrawer responsiveWidth="750px" drawerWidth="360px" disableSwipe>
        <div drawer class="right-drawer">
            <div horizontal layout center-center class="flint-item-info">
                <div>
                    <core-icon class="huge flint-header-icon" icon="hardware:headset"></core-icon>
                </div>
                <div flex>
                    <h2 class="subhead">Guugu Yimithirr / Guugu Yimidhirr / Gugu Yimithirr / Kuku Yimidhirr</h2>
                </div>
                <div>
                    <paper-icon-button icon="close" id="close-drawer" class="flint-responsive-menu-toggle-icon" onclick="closeDrawer()"></paper-icon-button>
                </div>
            </div>
            <div flex>
                <core-icon-button id="audio-1" icon="av:play-circle-outline" onclick="playRecord(this, 'http://espace.library.uq.edu.au/view/UQ:318711/Reel35_PatBowe.mp3')"></core-icon-button >Record 1<br>
                <core-icon-button  id="audio-2" icon="av:play-circle-outline" onclick="playRecord(this, 'http://espace.library.uq.edu.au/view/UQ:318711/Reel36_PatBowe.mp3')"></core-icon-button>Record 2<br>
            </div>
            <div horizontal layout center-center id="player">
                <x-audio id="audioPlayer" showVolumeControls></x-audio>
            </div>
        </div>
        <div main>

            <core-toolbar>
                <paper-icon-button icon="menu" class="flint-responsive-menu-icon" onclick="closeMenu()"></paper-icon-button>
                <div class="glow">
                    <h1 flex id="toolbar-page-title">Indigenous Voices</h1>
                </div>
            </core-toolbar>

            <paper-tabs selected="0">
                <paper-tab>Map</paper-tab>
                <paper-tab>Languages</paper-tab>
                <paper-tab>Voices</paper-tab>
                <paper-tab>Search</paper-tab>
            </paper-tabs>
            <core-animated-pages selected="{{selected}}" transitions="slide-from-right">
                <div>

                    <!--<google-map latitude="-21.488403" longitude="147.1480151" disableDefaultUI zoom="6">-->

                        <!--<google-map-marker latitude="-19.265433" longitude="146.816289" clickEvents></google-map-marker>-->
                        <!--<google-map-marker latitude="-21.392335" longitude="145.101973" clickEvents></google-map-marker>-->

                    <!--</google-map>-->
                    <div horizontal center-justified layout>
                        <div>
                            <div vertical layout style="height:500px">
                                <div flex>
                                    <div class="responsiveCard">
                                            <div class="subhead cardSection cardTitle">&lt;!-- TODO: Uncomment the google map component here once it has been imported through uqlibrary-elements --></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div>
                    <div horizontal center-justified layout>
                        <div>
                            <div vertical layout style="height:500px">
                                <div flex>
                                    <div class="responsiveCard">
                                        <div class="subhead cardSection cardTitle">&lt;!-- TODO: Add Languages Tab stuff --></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div>
                    <div horizontal center-justified layout>
                        <div>
                            <div vertical layout style="height:500px">
                                <div flex>
                                    <div class="responsiveCard">
                                        <div class="subhead cardSection cardTitle">&lt;!-- TODO: Add Voices Tab stuff --></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div>
                    <div horizontal center-justified layout>
                        <div>
                            <div vertical layout style="height:500px">
                                <div flex>
                                    <div class="responsiveCard">
                                        <div class="subhead cardSection cardTitle">&lt;!-- TODO: Add Search Tab stuff--></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </core-animated-pages>
        </div>
    </core-drawer-panel>

</core-drawer-panel>

<paper-action-dialog backdrop autoCloseDisabled layered="false" id="warning">
  <h1>Cultural Sensitivity Warning</h1>
  <p>We warn that there may be words and descriptions that may be culturally sensitive and which might not normally be used in certain public or community contexts. Terms and annotations that reflect the attitude of the author or the period in which the item was written, may be considered inappropriate today.</p>
  <p>Please be aware that in some Aboriginal communities, hearing or seeing names or seeing images of deceased persons might cause sadness or distress, particularly to the relatives of these people. Aboriginal people may also have prohibitions in place on who may see certain records based on the age, or sacred or sensitive status of information in them, as it may relate to individuals of any particular Aboriginal group.</p>

  <paper-button affirmative autofocus>Yes, I understand</paper-button>
  <paper-button affirmative>No thanks</paper-button>
</paper-action-dialog>

<script>

  var previousAudioId = null;
  var currentAudioId = null;
  var audioPlayer = document.querySelector('#audioPlayer');
  document.addEventListener('polymer-ready', function(){

    audioPlayer.addEventListener('x-audio-initialized', function() {
      audioPlayer.play()
    });

    audioPlayer.addEventListener('x-audio-play', function() {
      console.log(currentAudioId);
      var _icon = document.getElementById(currentAudioId);
      if(_icon) {
        _icon.icon = 'av:pause-circle-outline';
      }
      previousAudioId = null;
    });

    audioPlayer.addEventListener('x-audio-pause', function() {
      var _id = previousAudioId;
      if(previousAudioId == null) {
        _id = currentAudioId;
      }

      var _icon = document.getElementById(_id);
      if(_icon) {
        _icon.icon = 'av:play-circle-outline';
      }
    });
  });

  function playRecord(sender, url) {
    if(audioPlayer.src == url) {
      if(audioPlayer.isPlaying) {
        previousAudioId = currentAudioId;
        audioPlayer.pause();
      }
      else {
        audioPlayer.play();
      }
    }
    audioPlayer.src = url;
    if(sender) {
      previousAudioId = currentAudioId;
      currentAudioId = sender.getAttribute('id');
    }
  }

  var tabs = document.querySelector('paper-tabs');
  var pages = document.querySelector('core-animated-pages');

  tabs.addEventListener('core-select', function () {
      pages.selected = tabs.selected;
  });

  function closeDrawer() {
      document.querySelector('core-drawer-panel [rightDrawer]').togglePanel();
  }

  function closeMenu() {
      document.querySelector('core-drawer-panel').togglePanel();
  }

  addEventListener('google-map-marker-click', function (e) {
      closeDrawer();
  });
</script>

</body>

</html>